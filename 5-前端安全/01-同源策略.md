浏览器安全分为三大块
1. Web页面安全
2. 浏览器网络安全
3. 浏览器系统安全

页面中最基础、最核心的安全策略：同源策略


什么是同源策略

如果两个URL的协议、域名和端口号都相同，称这两个URL同源

浏览器默认两个相同的源之间是可以相互访问资源和操作DOM的。两个不同的源之间若想要相互访问资源或者
操作DOM，那么会有医药基础的安全策略的限制，把这成为同源策略


同源策略主要表现在DOM、Web数据和网络三个层面


1. DOM层面：同源策略限制了不同源的JavaScript脚本对当前DOM对象读和写的操作

2. 数据层面：同源策略限制了不同源的站点读取当前站点Cookie、IndexDB、LocalStorage等数据

3. 网络层面： 同源策略限制了XMLHTTPRequest等方式将站点的数据发送给不同源的站点




安全和便利性的权衡

安全性和便利性是相互对立的，让不同源之间绝对隔离，无疑是最安全的措施，但这也会使得Web项目难以开发
和使用。因此我们就要在这之间做出权衡，出让一些安全性来满足灵活性；而出让安全性又带来很多安全问题，
最典型的就是XSS攻击和CSRF攻击

1. 页面中可以嵌入第三方资源
    Web 世界是开放的，可以接入任何资源，而同源策略要让一个页面的所有资源都来自于同一个源，也就是
    要将该页面的所有 HTML 文件、JavaScript 文件、CSS 文件、图片等资源都部署在同一台服务器上，
    这无疑违背了 Web 的初衷，也带来了诸多限制。比如将不同的资源部署到不同的 CDN 上时，CDN 上的
    资源就部署在另外一个域名上，因此我们就需要同源策略对页面的引用资源开一个“口子”，让其任意引
    用外部文件。

    所以最初的浏览器都是支持外部引用资源文件的，不过这也带来了很多问题。之前在开发浏览器的时候，
    遇到最多的一个问题是浏览器的首页内容会被一些恶意程序劫持，劫持的途径很多，其中最常见的是恶
    意程序通过各种途径往 HTML 文件中插入恶意脚本。 

    浏览器是无法区分被插入的文件是恶意的还是正常的，这样恶意脚本就寄生在页面之中，当页面启动时，
    它可以修改用户的搜索结果、改变一些内容的连接指向，等等。

    除此之外，它还能将页面的的敏感数据，如 Cookie、IndexDB、LoacalStorage 等数据通过 XSS 的
    手段发送给服务器。具体来讲就是，当你不小心点击了页面中的一个恶意链接时，恶意 JavaScript 代
    码可以读取页面数据并将其发送给服务器

    为了解决 XSS 攻击，浏览器中引入了内容安全策略，称为 CSP。CSP 的核心思想是让服务器决定浏览
    器能够加载哪些资源，让服务器决定浏览器是否能够执行内联 JavaScript 代码。

2. 跨域资源共享和跨文档消息机制
    跨域资源共享（CORS），使用该机制可以进行跨域访问控制，从而使跨域数据传输得以安全进行。

    如果两个页面不是同源的，则无法相互操纵 DOM。不过在实际应用中，经常需要两个不同源的 DOM 
    之间进行通信，于是浏览器中又引入了跨文档消息机制，可以通过 window.postMessage 的 
    JavaScript 接口来和不同源的 DOM 进行通信。