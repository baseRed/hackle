浏览器被划分为浏览器内核和渲染内核两个核心模块，其中浏览器内核
是由网络进程、浏览器主进程和 GPU 进程组成的，渲染内核就是渲染进程。那如果我们在
浏览器中打开一个页面，这两个模块是怎么配合的呢



所有的网络资源都是通过浏览器内核来下载的，下载后的资源会通过 IPC 将其提交给渲染
进程（浏览器内核和渲染进程之间都是通过 IPC 来通信的）。然后渲染进程会对这些资源
进行解析、绘制等操作，最终生成一幅图片。但是渲染进程并不负责将图片显示到界面上，
而是将最终生成的图片提交给浏览器内核模块，由浏览器内核模块负责显示这张图片。


什么是安全沙箱

由于渲染进程需要执行 DOM 解析、CSS 解析、网络图片解码等操
作，如果渲染进程中存在系统级别的漏洞，那么以上操作就有可能让恶意的站点获取到渲染
进程的控制权限，进而又获取操作系统的控制权限，这对于用户来说是非常危险的。
因为网络资源的内容存在着各种可能性，所以浏览器会默认所有的网络资源都是不可信的，
都是不安全的。但谁也不能保证浏览器不存在漏洞，只要出现漏洞，黑客就可以通过网络内
容对用户发起攻击。
我们知道，如果你下载了一个恶意程序，但是没有执行它，那么恶意程序是不会生效的。同
理，浏览器之于网络内容也是如此，浏览器可以安全地下载各种网络资源，但是如果要执行
这些网络资源，比如解析 HTML、解析 CSS、执行 JavaScript、图片编解码等操作，就需
要非常谨慎了，因为一不小心，黑客就会利用这些操作对含有漏洞的浏览器发起攻击。
基于以上原因，我们需要在渲染进程和操作系统之间建一道墙，即便渲染进程由于存在漏洞
被黑客攻击，但由于这道墙，黑客就获取不到渲染进程之外的任何操作权限。

将渲染进程和操作系统隔离的这道墙就是安全沙箱。


浏览器中的安全沙箱是利用操作系统提供的安全技术，让渲染进程在执行过程中无法访问或
者修改操作系统中的数据，在渲染进程需要访问系统资源的时候，需要通过浏览器内核来实
为什么一定要通过浏览器内核去请求资源，再将数据转发给渲染进程，而不直接从进程
内部去请求网络资源？
为什么渲染进程只负责生成页面图片，生成图片还要经过 IPC 通知浏览器内核模块，然
后让浏览器内核去负责展示图片？
现，然后将访问的结果通过 IPC 转发给渲染进程。
安全沙箱最小的保护单位是进程。因为单进程浏览器需要频繁访问或者修改操作系统的数
据，所以单进程浏览器是无法被安全沙箱保护的，而现代浏览器采用的多进程架构使得安全
沙箱可以发挥作用。
